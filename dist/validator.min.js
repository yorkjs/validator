!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).Validator={})}(this,(function(e){"use strict";function r(e,r,n){return r&&function(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function t(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof r?r:r+""}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Object.prototype.toString;function o(e){return i.call(e).toLowerCase().slice(8,-1)}function a(e){return!(!e||"object"!==o(e))}function u(e,r){for(var t in r)e[t]=r[t]}function s(e,r){if(!Array.isArray(r))return{rule:e,reason:"type"};var t=r.length;if(void 0!==e.min&&t<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&t>e.max)return{rule:e,reason:"max"};var n=e.itemType;if(n)for(var i=0;i<t;i++)if(o(r[i])!==n)return{rule:e,reason:"itemType"}}function f(e,r){return"boolean"!=typeof r?{rule:e,reason:"type"}:void 0!==e.value&&e.value!==r?{rule:e,reason:"value"}:void 0}function c(e,r){if("string"!=typeof r)return{rule:e,reason:"type"};if(""===r){if(!0===e.empty)return;return{rule:e,reason:"empty"}}if(void 0!==e.min&&r.length<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&r.length>e.max)return{rule:e,reason:"max"};if(void 0!==e.pattern&&!e.pattern.test(r))return{rule:e,reason:"pattern"};if(void 0!==e.custom){var t=e.custom(r);if(t)return{rule:e,reason:t}}}var l=/^\d{4}\-\d{2}\-\d{2}$/;function p(e,r){var t={};return u(t,e),u(t,{type:"string",pattern:l}),c(t,r)}var y=/^\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}$/;function m(e,r){var t={};return u(t,e),u(t,{type:"string",pattern:y}),c(t,r)}function v(e,r){if(!Array.isArray(e.values)||e.values.indexOf(r)<0)return{rule:e,reason:"type"}}function d(e,r){return"number"!=typeof r||r%1!=0?{rule:e,reason:"type"}:void 0!==e.min&&r<e.min?{rule:e,reason:"min"}:void 0!==e.max&&r>e.max?{rule:e,reason:"max"}:void 0}function b(e,r){if("number"!=typeof r||isNaN(r))return{rule:e,reason:"type"};if(void 0!==e.min&&r<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&r>e.max)return{rule:e,reason:"max"};if(void 0!==e.precision){var t=(""+r).split(".");if(2===t.length&&t[1].length>e.precision)return{rule:e,reason:"precision"}}}function h(e,r){if(!a(r))return{rule:e,reason:"type"}}var g=function(){return r((function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.rules={int:d,integer:d,number:b,string:c,bool:f,boolean:f,enum:v,array:s,object:h,date:p,dateTime:m},this.messages={}}),[{key:"add",value:function(e,r,t){a(e)?(u(this.rules,e),a(r)&&u(this.messages,r)):(this.rules[e]=r,this.messages[e]=t)}},{key:"validate",value:function(e,r,t){var i=void 0;for(var u in r){var s=r[u],f=void 0;switch(o(s)){case"string":f={type:s};break;case"array":f={type:"enum",values:s};break;case"regexp":f={type:"string",pattern:s};break;default:f=s}if(!a(f)||!f.type)throw new Error("".concat(u,"'s rule is not found."));var c=void 0;if(void 0!==e[u])c=this.rules[f.type](f,e[u],e);else{if(!1===f.required)continue;c={rule:f,reason:"required"}}if(c){var l=t&&t[u]&&t[u][c.reason];switch("string"!=typeof l&&"function"!=typeof l&&(l=this.messages[f.type]&&this.messages[f.type][c.reason]),i||(i={}),n(l)){case"string":i[u]=l;break;case"function":i[u]=l(c.rule);break;default:i[u]=c.reason}}}return i}}])}();e.Validator=g,e.checkArray=s,e.checkBoolean=f,e.checkDate=p,e.checkDateTime=m,e.checkEnum=v,e.checkInteger=d,e.checkNumber=b,e.checkObject=h,e.checkString=c,e.version="0.1.0"}));
//# sourceMappingURL=validator.min.js.map

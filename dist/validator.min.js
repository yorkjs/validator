!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).Validator={})}(this,(function(e){"use strict";var r=Object.prototype.toString;function n(e){return r.call(e).toLowerCase().slice(8,-1)}function t(e){return!(!e||"object"!==n(e))}function i(e,r){for(var n in r)e[n]=r[n]}function o(e,r){if(!Array.isArray(r))return{rule:e,reason:"type"};var t=r.length;if(void 0!==e.min&&t<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&t>e.max)return{rule:e,reason:"max"};var i=e.itemType;if(i)for(var o=0;o<t;o++)if(n(r[o])!==i)return{rule:e,reason:"itemType"}}function a(e,r){return"boolean"!=typeof r?{rule:e,reason:"type"}:void 0!==e.value&&e.value!==r?{rule:e,reason:"value"}:void 0}function u(e,r){if("string"!=typeof r)return{rule:e,reason:"type"};if(""===r){if(!0===e.empty)return;return{rule:e,reason:"empty"}}if(void 0!==e.min&&r.length<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&r.length>e.max)return{rule:e,reason:"max"};if(void 0!==e.pattern&&!e.pattern.test(r))return{rule:e,reason:"pattern"};if(void 0!==e.custom){var n=e.custom(r);if(n)return{rule:e,reason:n}}}var s=/^\d{4}\-\d{2}\-\d{2}$/;function f(e,r){var n={};return i(n,e),i(n,{type:"string",pattern:s}),u(n,r)}var l=/^\d{4}\-\d{2}\-\d{2} \d{2}:\d{2}:\d{2}$/;function c(e,r){var n={};return i(n,e),i(n,{type:"string",pattern:l}),u(n,r)}function p(e,r){if(!Array.isArray(e.values)||e.values.indexOf(r)<0)return{rule:e,reason:"type"}}function d(e,r){return"number"!=typeof r||r%1!=0?{rule:e,reason:"type"}:void 0!==e.min&&r<e.min?{rule:e,reason:"min"}:void 0!==e.max&&r>e.max?{rule:e,reason:"max"}:void 0}function m(e,r){if("number"!=typeof r||isNaN(r))return{rule:e,reason:"type"};if(void 0!==e.min&&r<e.min)return{rule:e,reason:"min"};if(void 0!==e.max&&r>e.max)return{rule:e,reason:"max"};if(void 0!==e.precision){var n=(""+r).split(".");if(2===n.length&&n[1].length>e.precision)return{rule:e,reason:"precision"}}}function v(e,r){if(!t(r))return{rule:e,reason:"type"}}var y=function(){this.rules={int:d,integer:d,number:m,string:u,bool:a,boolean:a,enum:p,array:o,object:v,date:f,dateTime:c},this.messages={}};y.prototype.add=function(e,r,n){t(e)?(i(this.rules,e),t(r)&&i(this.messages,r)):(this.rules[e]=r,this.messages[e]=n)},y.prototype.validate=function(e,r,i){var o;for(var a in r){var u=r[a],s=void 0;switch(n(u)){case"string":s={type:u};break;case"array":s={type:"enum",values:u};break;case"regexp":s={type:"string",pattern:u};break;default:s=u}if(!t(s)||!s.type)throw new Error(a+"'s rule is not found.");var f=void 0;if(void 0!==e[a])f=this.rules[s.type](s,e[a],e);else{if(!1===s.required)continue;f={rule:s,reason:"required"}}if(f){var l=i&&i[a]&&i[a][f.reason];switch("string"!=typeof l&&"function"!=typeof l&&(l=this.messages[s.type]&&this.messages[s.type][f.reason]),o||(o={}),typeof l){case"string":o[a]=l;break;case"function":o[a]=l(f.rule);break;default:o[a]=f.reason}}}return o};e.Validator=y,e.checkArray=o,e.checkBoolean=a,e.checkDate=f,e.checkDateTime=c,e.checkEnum=p,e.checkInteger=d,e.checkNumber=m,e.checkObject=v,e.checkString=u,e.version="0.1.0",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=validator.min.js.map
